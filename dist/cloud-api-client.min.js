/* Bitbar Cloud API Client for JavaScript v0.8.2 | (c) Bitbar Technologies and contributors | https://github.com/bitbar/cloud-api-client-js/blob/master/LICENSE.md */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("finka"),require("axios"),require("qs")):"function"==typeof define&&define.amd?define(["finka","axios","qs"],e):(t=t||self)["cloud-api-client-js"]=e(t.finka,t.axios,t.qs)}(this,function(t,e,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n;var r,o,i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */function s(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(o=r=r||{}).GET="GET",o.POST="POST",o.DELETE="DELETE";var u=(p.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t;n<r.length;n++){var o=r[n];this.stack.push(o)}return this},p.prototype.pop=function(){return this.stack.pop(),this},p.prototype.toUrl=function(t){void 0===t&&(t=!1);var e="/"+this.stack.join("/");return t&&(e=this.root.axiosConfig.baseURL+e),e},p.prototype.setRequestConfig=function(t){return Object.deepAssign(this.requestConfig,t),this},p.prototype.removeRequestConfig=function(t){return delete this.requestConfig[t],this},p.prototype.headers=function(t){var e={};for(var n in t)e[n.replace(/(?:^|-)([a-z])/g,function(t){return t.toUpperCase()})]=t[n];return this.setRequestConfig({headers:e})},p.prototype.method=function(t){var e=t.toLocaleUpperCase();if(!r[e])throw new Error("Method '"+e+"' is not allowed! You can use: "+Object.keys(r).join(", "));return this.setRequestConfig({method:e})},p.prototype.get=function(){return this.method("GET")},p.prototype.post=function(){return this.method("POST")},p.prototype.params=function(t){return Object.deepAssign(this.requestConfig,{params:t}),this},p.prototype.getParams=function(){return null==this.requestConfig.params?{}:this.requestConfig.params},p.prototype.removeParam=function(t){return delete this.requestConfig.params[t],this},p.prototype.data=function(t){return Object.deepAssign(this.requestConfig,{data:t}),this},p.prototype.jsonData=function(t){return this.headers({"Content-Type":"application/json"}).data(t),this},p.prototype.send=function(){var t=Object.deepAssign({},this.requestConfig,{url:"/"+this.stack.join("/")});return null==t.headers&&(t.headers={}),null==t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),"POST"===t.method&&"application/x-www-form-urlencoded"===t.headers["Content-Type"]&&null!=t.data&&(t.data=n.stringify(t.data)),this.root.axios.request(t)},p);function p(t){this.stack=[],this.requestConfig={},t instanceof p?(this.root=t.root,Array.isArray(t.stack)&&this.push.apply(this,t.stack),null!=t.requestConfig&&this.setRequestConfig(t.requestConfig)):this.root=t}var h=function(t,e,n){this.name=t,this.value=e,this.operand=n},a=(c.prototype.add=function(t,e,n,r){if(void 0===r&&(r=!1),0===(e=Array.wrap(e)).length)return this;for(var o=0;o<e.length;o++)"object"==typeof(u=e[o])&&u instanceof Date&&(e[o]=u.getTime());if(r)for(var i=0,s=e;i<s.length;i++)var u=s[i];return n.endsWith("ornull")&&0===e.length&&(n="isnull"),this.filters.push(new h(t,e,n)),this},c.prototype.gt=function(t,e){return this.add(t,e,"gt")},c.prototype.lt=function(t,e){return this.add(t,e,"lt")},c.prototype.after=function(t,e){return this.add(t,e,"after",!0)},c.prototype.afterorequal=function(t,e){return this.add(t,e,"afterorequal",!0)},c.prototype.before=function(t,e){return this.add(t,e,"before",!0)},c.prototype.beforeorequal=function(t,e){return this.add(t,e,"beforeorequal",!0)},c.prototype.on=function(t,e){return this.add(t,e,"on")},c.prototype.eq=function(t,e){return this.add(t,e,"eq")},c.prototype.contains=function(t,e){return this.add(t,e,"contains")},c.prototype.like=function(t,e){return this.add(t,e,"like")},c.prototype.isnull=function(t){return this.add(t,void 0,"isnull")},c.prototype.in=function(t,e){return this.add(t,e,"in",!0)},c.prototype.notin=function(t,e){return this.add(t,e,"notin",!0)},c.prototype.raw=function(t){for(var e=0,n=Array.wrap(t);e<n.length;e++){var r=n[e];if(!this.isFilterPart(r))throw new SyntaxError("Filter "+r+" has invalid syntax");this.filters.push(r)}},c.prototype.isFilterPart=function(t){return/^[a-zA-Z0-9.]{2,12}_(?:isnull$|(?:gt|lt|(?:after|before)(?:orequal)?|on|eq|contains|like|(?:not)?in)_)/.test(t)},c.prototype.toString=function(){for(var t,e,n=[],r=0,o=this.filters;r<o.length;r++){var i=o[r];t="string"==typeof i?i:(e="",(1<i.value.length||void 0!==i.value[0])&&(e="_"+i.value.join("|")),i.name+"_"+i.operand+e),n.push(t)}return n.join(";")},c);function c(){this.filters=[]}var f,l;(l=f=f||{}).asc="a",l.desc="d";var y,w=(s(d,y=u),d.prototype.create=function(t){return this.post().data(t).send()},d.prototype.sort=function(t,e){return void 0===e&&(e=f.asc),this.params({sort:t+"_"+e})},d.prototype.limit=function(t){if(void 0===t&&(t=20),!Number.isNatural(t))throw new Error("Limit '"+t+"' is invalid!");return this.params({limit:t})},d.prototype.getLimit=function(){var t=this.getParams();return null==t.limit?20:t.limit},d.prototype.noLimit=function(){return this.limit(0)},d.prototype.offset=function(t){if(void 0===t&&(t=0),!Number.isNatural(t))throw new Error("Offset '"+t+"' is invalid!");return this.params({offset:t})},d.prototype.between=function(t,e){if(!Number.isNatural(t))throw new Error("From '"+t+"' is invalid!");if(!Number.isNatural(e))throw new Error("To '"+e+"' is invalid!");return this.params({offset:t,limit:e-t+1})},d.prototype.only=function(t){if(!Number.isNatural(t))throw new Error("Index '"+t+"' is invalid!");return this.params({offset:t,limit:1})},d.prototype.page=function(t){if(void 0===t&&(t=1),!Number.isNatural(t)||0==t)throw new Error("Page '"+t+"' is invalid!");var e=this.getLimit(),n=(t-1)*e;return this.params({offset:n,limit:e})},d.prototype.search=function(t){if("string"!=typeof t)throw new Error("Search query must be a string!");return this.params({search:t})},d.prototype.filter=function(t){var e=t instanceof a;if("string"!=typeof t&&!e)throw new Error("Filter must be either string or instance of FilterBuilder");return e&&(t=t.toString()),this.params({filter:t})},d);function d(){return null!==y&&y.apply(this,arguments)||this}var v,g=(s(m,v=u),m.prototype.delete=function(){this.method("DELETE")},m);function m(){return null!==v&&v.apply(this,arguments)||this}var b,E=(s(R,b=w),R.prototype.filters=function(){return new g(this).push("filters")},R.prototype.cleanupConfigurations=function(){return new w(this).push("cleanup-configurations")},R.prototype.cleanupConfiguration=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("cleanup-configurations",t)},R);function R(t){var e=b.call(this,t)||this;return e.push("devices"),e}var q,C=(s(D,q=w),D.prototype.activate=function(){return new g(this).push("activate")},D.prototype.recoveries=function(){return new g(this).push("recoveries")},D.prototype.passwordRecovery=function(){return new g(this).push("password-recovery")},D.prototype.resetApiKey=function(){return new g(this).push("reset-api-key")},D.prototype.validateVatId=function(){return new g(this).push("validateVatId")},D);function D(t){var e=q.call(this,t)||this;return e.push("users"),e}var j,I=(s(x,j=g),x.prototype.receipt=function(){return new g(this).push("receipt").setRequestConfig({responseType:"arraybuffer"})},x);function x(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=j.call(this,t)||this).push("billing-periods",e),n}var T,k=(s(A,T=g),A.prototype.abort=function(){return new g(this).push("abort")},A.prototype.outputFiles=function(){return new w(this).push("output-file-set","files")},A);function A(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=T.call(this,t)||this).push("builds",e),n}var P,S=(s(U,P=g),U.prototype.builds=function(){return new w(this).push("builds")},U.prototype.build=function(t){return new k(this,t)},U);function U(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=P.call(this,t)||this).push("jobs",e),n}var O,_=(s(N,O=g),N.prototype.devices=function(){return new w(this).push("devices")},N.prototype.device=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("devices",t)},N.prototype.selectors=function(){return new w(this).push("selectors")},N.prototype.selector=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("selectors",t)},N);function N(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=O.call(this,t)||this).push("device-groups",e),n}var L,F=(s(z,L=g),z.prototype.files=function(){return new w(this).push("files")},z.prototype.filesZip=function(){return new g(this).push("files.zip")},z);function z(t){var e=L.call(this,t)||this;return e.push("input-file-set"),e}var G=new a;G.eq("state","READY"),G.notin("mimetype",["image/png","image/jpg","image/jpeg","image/webp","image/gif","video/mp4","video/avi","video/webm","video/ogg","video/mpeg"]);var K,Z=(s(B,K=g),B.prototype.files=function(){return new w(this).push("files")},B.prototype.filesZip=function(){return new g(this).push("files.zip")},B.prototype.screenshots=function(){return new w(this).push("screenshots")},B.prototype.screenshot=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("screenshots",t)},B.prototype.screenshotFile=function(t){this.screenshot(t).push("file")},B.prototype.videos=function(){this.files().params({filter:"s_state_eq_READY",tag:["video"]})},B.prototype.nonMediaFiles=function(){return this.files().filter(G)},B);function B(t){var e=K.call(this,t)||this;return e.push("output-file-set"),e}var J,Y=(s($,J=g),$.prototype.clusterLogs=function(){return new g(this).push("cluster-logs")},$.prototype.dataAvailability=function(){return new g(this).push("data-availability")},$.prototype.fixturesZip=function(){return new g(this).push("fixtures.zip")},$.prototype.junitXml=function(){return new g(this).push("junit.xml")},$.prototype.logs=function(){return new g(this).push("logs")},$.prototype.performance=function(){return new g(this).push("performance")},$.prototype.release=function(){return new g(this).push("release")},$.prototype.resultDataZip=function(){return new g(this).push("result-data.zip")},$.prototype.screenshots=function(){return new w(this).push("screenshots")},$.prototype.screenshot=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("screenshots",t)},$.prototype.steps=function(){return new w(this).push("steps")},$.prototype.step=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("steps",t)},$.prototype.currentStep=function(){return this.step("current")},$.prototype.testCaseRuns=function(){return new w(this).push("test-case-runs")},$.prototype.retry=function(){return new g(this).push("retry").post()},$.prototype.input=function(){return new F(this)},$.prototype.output=function(){return new Z(this)},$.prototype.videos=function(){return this.output().videos()},$);function $(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=J.call(this,t)||this).push("device-sessions",e),n}var M,V=(s(H,M=Y),H.prototype.connections=function(){return new g(this).push("connections")},H);function H(){return null!==M&&M.apply(this,arguments)||this}var W,X=(s(Q,W=g),Q.prototype.config=function(){return new g(this).push("config")},Q.prototype.deviceSessions=function(){return new w(this).push("device-sessions")},Q.prototype.deviceSession=function(t){return new Y(this,t)},Q.prototype.steps=function(){return new w(this).push("steps")},Q.prototype.files=function(){return new w(this).push("files")},Q.prototype.filesZip=function(){return new g(this).push("files.zip")},Q.prototype.tags=function(){return new w(this).push("tags")},Q.prototype.tag=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("tags",t)},Q);function Q(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=W.call(this,t)||this).push("runs",e),n}var tt,et=(s(nt,tt=g),nt.prototype.runs=function(){return new w(this).push("runs")},nt.prototype.run=function(t){return new X(this,t)},nt.prototype.runsExtended=function(){return new w(this).push("runs-extended")},nt.prototype.runExtended=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("runs-extended",t)},nt.prototype.files=function(){return new w(this).push("files")},nt.prototype.filesZip=function(){return new g(this).push("files.zip")},nt.prototype.sharings=function(){return new w(this).push("sharings")},nt.prototype.sharing=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("sharings",t)},nt);function nt(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=tt.call(this,t)||this).push("projects",e),n}var rt,ot=(s(it,rt=g),it.prototype.file=function(){return new g(this).push("file")},it.prototype.icon=function(){return new g(this).push("icon")},it.prototype.tags=function(){return new w(this).push("tags")},it);function it(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=rt.call(this,t)||this).push("files",e),n}var st,ut=(s(pt,st=g),pt.prototype.test=function(){return new g(this).push("test")},pt);function pt(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=st.call(this,t)||this).push("notifications",e),n}var ht,at=(s(ct,ht=w),ct.prototype.reserved=function(){return new w(this).push("reserved")},ct.prototype.used=function(){return new w(this).push("used")},ct);function ct(t){var e=ht.call(this,t)||this;return e.push("device-time"),e}var ft,lt=(s(yt,ft=w),yt.prototype.upload=function(t){var e;if(!globalThis.isNodeJs)throw new Error("Not supported yet!");var n=require("fs");(e=new(require("form-data"))).append("file",n.createReadStream(t.dir+"/"+t.filename),{filename:t.filename}),this.post().headers(e.getHeaders()).data(e)},yt);function yt(t){var e=ft.call(this,t)||this;return e.push("files"),e}var wt,dt=(s(vt,wt=w),vt);function vt(t){var e=wt.call(this,t)||this;return e.push("purchased"),e}var gt,mt=(s(bt,gt=w),bt.prototype.purchased=function(){return new dt(this)},bt.prototype.available=function(){this.push("available")},bt);function bt(t){var e=gt.call(this,t)||this;return e.push("services"),e}var Et,Rt=(s(qt,Et=w),qt.prototype.config=function(){return new g(this).push("config")},qt);function qt(t){var e=Et.call(this,t)||this;return e.push("runs"),e}var Ct,Dt=(s(jt,Ct=w),jt.prototype.scopes=function(){return new w(this).push("scopes")},jt.prototype.channels=function(){return new w(this).push("channels")},jt);function jt(t){var e=Ct.call(this,t)||this;return e.push("notifications"),e}var It,xt=(s(Tt,It=g),Tt.prototype.deviceTime=function(){return new at(this)},Tt.prototype.services=function(){return new mt(this)},Tt.prototype.service=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("services",t)},Tt.prototype.accountServiceBillingPeriod=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("account-services",t,"billing-period")},Tt.prototype.billingPeriods=function(){return new w(this).push("billing-periods")},Tt.prototype.billingPeriod=function(t){return new I(this,t)},Tt.prototype.jobs=function(){return new w(this).push("jobs")},Tt.prototype.job=function(t){return new S(this,t)},Tt.prototype.deviceGroups=function(){return new w(this).push("device-groups")},Tt.prototype.deviceGroup=function(t){return new _(this,t)},Tt.prototype.deviceSessions=function(){return new w(this).push("device-sessions")},Tt.prototype.deviceSession=function(t){return new Y(this,t)},Tt.prototype.manualSession=function(t){return new V(this,t)},Tt.prototype.projects=function(){return new w(this).push("projects")},Tt.prototype.project=function(t){return new et(this,t)},Tt.prototype.files=function(){return new lt(this)},Tt.prototype.file=function(t){return new ot(this,t)},Tt.prototype.runs=function(){return new Rt(this)},Tt.prototype.availableBuildExecutors=function(){return new w(this).push("available-build-executors")},Tt.prototype.availableFrameworks=function(){return new w(this).push("available-frameworks")},Tt.prototype.resetApiKey=function(){return new g(this).push("reset-api-key")},Tt.prototype.restore=function(){return new g(this).push("restore")},Tt.prototype.accountAdditionalUsers=function(){return new w(this).push("account","additional-users")},Tt.prototype.accountAdditionalUser=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("account","additional-users",t)},Tt.prototype.feedback=function(){return new g(this).push("feedback")},Tt.prototype.notifications=function(){return new Dt(this)},Tt.prototype.notification=function(t){return new ut(this,t)},Tt.prototype.receipts=function(){return new w(this).push("receipts")},Tt.prototype.uiPreferences=function(){return new g(this).push("ui-preferences")},Tt.prototype.integrations=function(){return new w(this).push("integrations")},Tt.prototype.integration=function(t){if(null==t)throw new Error("Resource ID cannot be null!");return new g(this).push("integrations",t)},Tt.prototype.deviceUsage=function(){return new w(this).push("device-usage")},Tt.prototype.statistics=function(){return new w(this).push("statistics")},Tt);function Tt(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");if(n=It.call(this,t)||this,"me"===e)n.push("me");else{if("number"!=typeof e)throw new TypeError("id is not a number");n.push("users",e)}return n}var kt,At=(s(Pt,kt=g),Pt.prototype.properties=function(){return new w(this).push("properties")},Pt);function Pt(t,e){var n=this;if(null==e)throw new Error("Resource ID cannot be null!");return(n=kt.call(this,t)||this).push("devices",e),n}var St,Ut=(s(Ot,St=g),Ot.prototype.login=function(t){return new g(this).push("login").post().data(t)},Ot.prototype.logout=function(){return new g(this).push("logout").post()},Ot.prototype.sso=function(t){return new g(this).push(t+"-login")},Ot);function Ot(t){var e=St.call(this,t)||this;return e.push("user-sessions"),e}var _t,Nt=(s(Lt,_t=g),Lt.prototype.deviceStatuses=function(){return new w(this).push("device-status")},Lt.prototype.files=function(){return new w(this).push("files")},Lt.prototype.file=function(t){return new ot(this,t)},Lt.prototype.runs=function(){return new w(this).push("runs")},Lt.prototype.projects=function(){return new w(this).push("projects")},Lt);function Lt(t){return _t.call(this,t)||this}function Ft(t){if(null==t)throw new Error("config cannot be empty");if(this.config=t,this.axiosConfig={},null==this.config.cloudUrl)throw new TypeError("cloudUrl cannot be empty");if("string"!=typeof this.config.cloudUrl)throw new TypeError("cloudUrl must be a string");if(!/^https?:\/\/.{2,}/.test(this.config.cloudUrl))throw new Error("cloudUrl doesn't look like a URL");if(this.axiosConfig.baseURL=this.config.cloudUrl.replace(/\/+$/,"")+"/api",this.config.v2=!!this.config.v2,this.config.v2&&(this.axiosConfig.baseURL+="/v2"),this.config.apiKey){if("string"!=typeof this.config.apiKey)throw new TypeError("apiKey must be a string");if(!/^[A-Za-z0-9]{32}$/.test(this.config.apiKey))throw new Error("apiKey is in the wrong format");this.axiosConfig.auth={username:this.config.apiKey,password:""}}this.axios=e.create(this.axiosConfig)}return globalThis.isNodeJs&&(e.defaults.headers.common["User-Agent"]="Bitbar Cloud API Client for JavaScript v0.8.2"),e.defaults.maxContentLength=1073741824,{API:(Ft.prototype.userSession=function(){return new Ut(this)},Ft.prototype.user=function(t){return new xt(this,t)},Ft.prototype.users=function(){return new C(this)},Ft.prototype.me=function(){return this.user("me")},Ft.prototype.admin=function(){return new Nt(this)},Ft.prototype.devices=function(){return new E(this)},Ft.prototype.device=function(t){return new At(this,t)},Ft.prototype.deviceGroups=function(){return new w(this).push("device-groups")},Ft.prototype.deviceGroup=function(t){return new _(this,t)},Ft.prototype.labelGroups=function(){return new w(this).push("label-groups")},Ft),FilterBuilder:a}});
