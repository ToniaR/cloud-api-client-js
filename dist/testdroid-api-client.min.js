/* Testdroid Cloud API Client for JavaScript v0.2.1-alpha | (c) Marek Sieroci≈Ñski and other contributors | https://github.com/marverix/testdroid-api-client-js/blob/master/LICENSE.md */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["testdroid-api-client-js"]=e()}(this,function(){"use strict";var t,e;
/*
    Throw error if id is not set
   */
(t={}).throwUnlessId=function(t,e){if(null==t)throw new Error(e+" id must be provided!")},
/*
    Serialize an array of form elements or a set of key/values into a query string

    Based on jQuery.param from jQuery v3.3.1

    jQuery JavaScript Library v3.3.1
    https://jquery.com/
   
    Copyright JS Foundation and other contributors
    Released under the MIT license
    https://jquery.org/license
   */
e=function(t,o,r){var n,i,s,p,u;if(Array.isArray(o))for(n in o)u=o[n],/\[\]$/.test(t)?r(t,u):e(t+"["+(null!=u&&"object"==typeof u?n:"")+"]",u,r);else if(null!=o&&"object"==typeof o)for(u=i=0,p=o.length;i<p;u=++i)s=o[u],e(t+"["+s+"]",u,r);else r(t,o)},t.param=function(t){var o,r,n,i,s,p,u;if(p=[],o=function(t,e){var o;return o="function"==typeof e?e():e,p[p.length]=encodeURIComponent(t)+"="+encodeURIComponent(null!=o?o:"")},Array.isArray(t))for(n=0,s=t.length;n<s;n++)o((r=t[n]).name,r.value);else for(i in t)u=t[i],e(i,u,o);return p.join("&")},t.getUrl=function(e,o,r){var n,i;return null==o&&(o={}),null==r&&(r=""),delete(n=t.extend({},o.params||{})).important,delete n.cacheTTL,(i=t.param(n).replace("%25","")).length>0&&(i="?"+i),r+e+i},t.extend=function(){var e,o,r,n;for(e=o=1,n=arguments.length-1;1<=n?o<=n:o>=n;e=1<=n?++o:--o)for(r in arguments[e])arguments[e].hasOwnProperty(r)&&("object"==typeof arguments[0][r]&&"object"==typeof arguments[e][r]?t.extend(arguments[0][r],arguments[e][r]):arguments[0][r]=arguments[e][r]);return arguments[0]},t.isJSONString=function(t){if("string"!=typeof t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0};var o,r,n,i=t,s=function(t,e){return function(){return t.apply(e,arguments)}},p={}.hasOwnProperty,u=function(t){function e(t,e,o){this.api=t,this.dataType=o,this.executeHooks=s(this.executeHooks,this),this.clearHooks=s(this.clearHooks,this),this.addHook=s(this.addHook,this),this.getAbsoluteResourcePath=s(this.getAbsoluteResourcePath,this),null!=e&&this.pushSelector(e.getSelector()),this.constantParams={},this._hooks=[]}return function(t,e){for(var o in e)p.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,Array),e.prototype.constantParams=null,e.prototype._hooks=null,e.prototype.cacheTTL=0,e.prototype.pushSelector=function(t,e){var o,r,n,i;for(null!=e&&(t+="#"+e),o=0,r=(i=t.split(/\s+/g)).length;o<r;o++)n=i[o],this.push(n);return this},e.prototype.getSelector=function(){return this.join(" ")},e.prototype.getResourcePath=function(){return"/"+this.join("/").replace(/#/g,"/")},e.prototype.getAbsoluteResourcePath=function(){return this.api.config.cloudUrl+this.getResourcePath()},e.prototype.getUrl=function(t){return null==t&&(t={}),this.api.getUrl(this.getResourcePath(),{params:t})},e.prototype.get=function(t){var e;return null!=this.dataType&&null==(null!=t?t.dataType:void 0)&&(null==t&&(t={}),t.dataType=this.dataType),(e=new Promise).then(this.executeHooks),(t=i.extend({params:this.constantParams},t)).params.cacheTTL=this.cacheTTL,this.api.request(this.getResourcePath(),"GET",t,e)},e.prototype.getCustom=function(t,e){var o;return null==t&&(t={}),null==e&&(e={}),o={method:"GET",params:i.extend({},this.constantParams,t)},i.extend(o,e),this.api.customRequest(this.getResourcePath(),o)},e.prototype._post=function(t){return this.api.request(this.getResourcePath(),"POST",t)},e.prototype.post=function(t,e){var o;return null==e&&(e={}),o={data:t,params:this.constantParams},i.extend(o,e),this._post(o)},e.prototype.update=function(t){return this.post(t)},e.prototype.delete=function(t){return this.api.request(this.getResourcePath(),"DELETE",t)},e.prototype.addHook=function(t){return this._hooks.push(t),this},e.prototype.clearHooks=function(){return this._hooks=[],this},e.prototype.executeHooks=function(t){for(;this._hooks.length>0;)this._hooks.shift()(t)},e.prototype.downloadCustom=function(t,e,o,r,n){var i,s,p;return null==o&&(o=null),null==r&&(r=null),null==n&&(n=!0),s=this.getCustom(t,e),n&&(null==(i=o)&&(i=this.join("-").replace(/#/g,"-")),$.pleaseWork(s,"Downloading "+i)),p=this,requirejs(["helpers/DownloadData"],function(t){return s.then(t.call(p,o,r))}),s},e.prototype.downloadBinary=function(t,e,o){return null==t&&(t=null),null==e&&(e=null),null==o&&(o=!0),this.downloadCustom({},{dataType:"binary",processData:!1},t,e,o)},e.prototype.downloadText=function(t,e,o,r){return null==t&&(t={}),null==e&&(e=null),null==o&&(o=null),null==r&&(r=!0),this.downloadCustom(t,{dataType:"text",processData:!1},e,o,r)},e.prototype.setConstantParams=function(t){return i.extend(this.constantParams,t),this},e}(),c={}.hasOwnProperty,h=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var o in e)c.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,u),e.prototype.update=function(t){return this.post(t)},e}(),a={}.hasOwnProperty,l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var o in e)a.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,u),e.prototype.get=function(t,o){var r;return null==t&&(t={}),null==o&&(o={}),r={params:i.extend({},this.constantParams,t)},i.extend(r,o),e.__super__.get.call(this,r)},e.prototype.create=function(t,e){return null==e&&(e={}),this.post(t,e)},e.prototype.delete=function(){return throwError("Can't delete collections")},e}(),f={}.hasOwnProperty,y=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Device"),this.pushSelector("devices",r)}return function(t,e){for(var o in e)f.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.queue=function(){return new l(this.api,this).pushSelector("queue")},e.prototype.property=function(t){return i.throwUnlessId(t,"Device Property"),new h(this.api,this).pushSelector("properties",t)},e.prototype.properties=function(){return new l(this.api,this).pushSelector("properties")},e.prototype.label=function(t){return i.throwUnlessId(t,"Device Label"),new h(this.api,this).pushSelector("labels",t)},e.prototype.labels=function(){return new l(this.api,this).pushSelector("labels")},e}(),d={}.hasOwnProperty,w=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"DeviceGroup"),this.pushSelector("device-groups",r)}return function(t,e){for(var o in e)d.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.devices=function(){return new l(this.api,this).pushSelector("devices")},e.prototype.device=function(t){return new y(this.api,this,t)},e.prototype.selectors=function(){return new l(this.api,this).pushSelector("selectors")},e.prototype.selector=function(t){return i.throwUnlessId(t,"DeviceGroup Selector"),new h(this.api,this).pushSelector("selectors",t)},e}(),_=function(){function t(){this.filters=[]}return t.prototype._checkType=function(t){return"boolean"==typeof t?"b":/^[0-9]{13}$/.test(t)?"d":/^[0-9]+(?:\.[0-9]+)?$/.test(t)?"n":"s"},t.prototype._add=function(t,e,o,r,n){var i,s,p,u,c,h,a,l,f;if(null==n&&(n=!1),Array.isArray(e)||(e=[e]),0===e.length)return this;for(i=p=0,h=e.length;p<h;i=++p)"object"==typeof(f=e[i])&&f instanceof Date&&(e[i]=f.getTime());if(null==r){for(u=0,a=e.length;u<a;u++)if(null!==(f=e[u])){r=this._checkType(f);break}"in"!==o&&"notin"!==o||(r="l"+r)}if(s=!1,n){for(c=0,l=e.length;c<l;c++)null===(f=e[c])&&(s=!0);s&&(e=e.filter(function(t){return null!==t}),o+="ornull")}return this.filters.push({name:t,value:e,operand:o,type:r}),this},t.prototype.gt=function(t,e){return this._add(t,e,"gt","n")},t.prototype.lt=function(t,e){return this._add(t,e,"lt","n")},t.prototype.after=function(t,e){return this._add(t,e,"after","d",!0)},t.prototype.before=function(t,e){return this._add(t,e,"before","d",!0)},t.prototype.on=function(t,e){return this._add(t,e,"on","d")},t.prototype.eq=function(t,e){return this._add(t,e,"eq",void 0)},t.prototype.contains=function(t,e){return this._add(t,e,"contains","s")},t.prototype.isnull=function(t,e){return this._add(t,void 0,"isnull",e)},t.prototype.in=function(t,e){return this._add(t,e,"in",void 0,!0)},t.prototype.notin=function(t,e){return this._add(t,e,"notin",void 0,!0)},t.prototype.raw=function(t){var e,o,r;if(Array.isArray(t))for(o=0,r=t.length;o<r;o++)e=t[o],this.filters.push(e);else this.filters.push(t)},t.prototype.ifFilterPart=function(t){return/^l?[ndsb]_[a-zA-Z]{1}_[a-z]{2,12}/.test(t)},t.prototype.toString=function(){var t,e,o,r,n,i,s;for(n=[],e=0,o=(i=this.filters).length;e<o;e++)"string"==typeof(t=i[e])?r=t:(s="",(t.value.length>1||void 0!==t.value[0])&&(s="_"+t.value.join("|")),r=t.type+"_"+t.name+"_"+t.operand+s),n.push(r);return n.join(";")},t}(),S=function(t,e){for(var o in e)v.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},v={}.hasOwnProperty;o=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"DeviceSession"),this.pushSelector("device-sessions",r)}return S(e,h),e.prototype.steps=function(){return new l(this.api,this).pushSelector("steps")},e.prototype.abort=function(){return new h(this.api,this).pushSelector("abort")},e.prototype.release=function(){return new h(this.api,this).pushSelector("release")},e.prototype.connections=function(){return new h(this.api,this).pushSelector("connections")},e.prototype.output=function(){return new n(this.api,this)},e.prototype.input=function(){return new r(this.api,this)},e.prototype.changeBillable=function(){return new h(this.api,this).pushSelector("changebillable")},e.prototype.retry=function(){var t;return(t=new h(this.api,this)).pushSelector("retry"),t._post({timeout:0})},e.prototype.logs=function(){return new h(this.api,this,"text").pushSelector("logs")},e.prototype.performance=function(){var t;return(t=new h(this.api,this)).cacheTTL=Date.ms.MINUTE,t.pushSelector("performance")},e.prototype.screenshots=function(){return new l(this.api,this).pushSelector("screenshots")},e.prototype.screenshot=function(t){return i.throwUnlessId(t,"DeviceSession Screenshot"),new h(this.api,this).pushSelector("screenshots",t)},e.prototype.videos=function(){return this.output().videos()},e.prototype.testCaseRuns=function(){var t;return(t=new l(this.api,this)).cacheTTL=Date.ms.MINUTE,t.pushSelector("test-case-runs")},e.prototype.dataAvailability=function(){return new h(this.api,this).pushSelector("data-availability")},e.prototype.clusterLogs=function(){return new h(this.api,this).pushSelector("cluster-logs")},e.prototype.resultDataZip=function(){return new h(this.api,this).pushSelector("result-data.zip")},e}(),r=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("input-file-set")}return S(e,h),e.prototype.files=function(){return new l(this.api,this).pushSelector("files")},e}(),n=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("output-file-set")}return S(e,h),e.prototype.filesZip=function(){return new h(this.api,this).pushSelector("files.zip")},e.prototype.files=function(){var t;return(t=new l(this.api,this)).cacheTTL=Date.ms.MINUTE,t.pushSelector("files")},e.prototype.note=function(t){return i.throwUnlessId(t,"DeviceSession Note"),new h(this.api,this).pushSelector("notes",t)},e.prototype.notes=function(){return new l(this.api,this).pushSelector("notes")},e.prototype.noteFile=function(t){return this.note(t).pushSelector("file")},e.prototype.screenshot=function(t){return new h(this.api,this).pushSelector("screenshots",t)},e.prototype.screenshots=function(){return new l(this.api,this).pushSelector("screenshots")},e.prototype.videos=function(){return this.files().setConstantParams({filter:"s_state_eq_READY",tag:["video"]})},e.prototype.nonMediaFiles=function(){return null==this._nonMediaFilesFilter&&(this._nonMediaFilesFilter=new _,this._nonMediaFilesFilter.eq("state","READY"),this._nonMediaFilesFilter.notin("mimetype",["image/png","image/jpg","image/jpeg","image/webp","image/gif","video/mp4","video/avi","video/webm","video/ogg","video/mpeg"])),this.files().setConstantParams({filter:this._nonMediaFilesFilter.toString()})},e.prototype.screenshotFile=function(t){return this.screenshot(t).pushSelector("file")},e}();var g=o,m={}.hasOwnProperty,b=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),isNumeric(r)?this.pushSelector("files",r):"string"==typeof r?"certificate"===r?this.pushSelector("certificate"):this.pushSelector("files",r):this.pushSelector("files")}return function(t,e){for(var o in e)m.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.upload=function(t){return this.post(t)},e.prototype.tags=function(){return new l(this.api,this).pushSelector("tags")},e.prototype.file=function(){return new h(this.api,this).pushSelector("file")},e.prototype.icon=function(){return new l(this.api,this).pushSelector("icon")},e.prototype.app=function(){return new l(this.api,this).pushSelector("application")},e.prototype.data=function(){return new l(this.api,this).pushSelector("data")},e.prototype.test=function(){return new l(this.api,this).pushSelector("test")},e}(),P={}.hasOwnProperty,U=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Run"),this.pushSelector("runs",r)}return function(t,e){for(var o in e)P.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.files=function(){return new l(this.api,this).pushSelector("files")},e.prototype.file=function(t){return new b(this.api,this,t)},e.prototype.tags=function(){return new l(this.api,this).pushSelector("tags")},e.prototype.tag=function(t){return i.throwUnlessId(t,"Run Tag"),new h(this.api,this).pushSelector("tags",t)},e.prototype.deviceSessions=function(){return new l(this.api,this).pushSelector("device-sessions")},e.prototype.deviceSession=function(t){return new g(this.api,this,t)},e.prototype.changeBillable=function(){return new h(this.api,this).pushSelector("changebillable")},e.prototype.changePriority=function(){return new h(this.api,this).pushSelector("changepriority")},e.prototype.videoRecording=function(t){return i.throwUnlessId(t,"Run ScreenRecording"),new h(this.api,this).pushSelector("video-recording",t)},e.prototype.reports=function(t){return new l(this.api,this,!1).pushSelector("reports",t)},e.prototype.steps=function(){return new l(this.api,this).pushSelector("steps")},e.prototype.screenRecordings=function(){return new l(this.api,this).pushSelector("screen-recordings")},e.prototype.screenshotNames=function(){return new l(this.api,this).pushSelector("screenshot-names")},e.prototype.screenshots=function(){return new l(this.api,this).pushSelector("screenshots")},e.prototype.abort=function(){return this.pushSelector("abort"),this._post()},e.prototype.retry=function(t){var e;return this.pushSelector("retry"),e={timeout:0},null!=t&&(e.params={deviceRunIds:t}),this._post(e)},e.prototype.buildLogs=function(t){var e;return this.pushSelector("build-logs.zip"),e={},null!=t&&(e.params={deviceRunIds:t}),this._post(e)},e.prototype.config=function(){return new h(this.api,this).pushSelector("config")},e.prototype.appsDataZip=function(){return new l(this.api,this).pushSelector("apps-data.zip")},e.prototype.screenshotsZip=function(){return new l(this.api,this).pushSelector("screenshots.zip")},e.prototype.performanceZip=function(){return new l(this.api,this).pushSelector("performance.zip")},e.prototype.logsZip=function(){return new l(this.api,this).pushSelector("logs.zip")},e.prototype.filesZip=function(){return new l(this.api,this).pushSelector("files.zip")},e.prototype.buildLogsZip=function(){return new l(this.api,this).pushSelector("build-logs.zip")},e.prototype.zipDataAvailability=function(){return new l(this.api,this).pushSelector("data-availability")},e}(),T={}.hasOwnProperty,j=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Project"),this.pushSelector("projects",r)}return function(t,e){for(var o in e)T.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.publicDeviceGroups=function(){return new h(this.api,this).pushSelector("public-device-groups")},e.prototype.publicDeviceGroup=function(t){var e;return(e=new w(this.api,this,t))[e.length-1]="public-device-groups",e},e.prototype.deviceGroups=function(){return new l(this.api,this).pushSelector("device-groups")},e.prototype.deviceGroup=function(t){return new w(this.api,this,t)},e.prototype.config=function(){return new h(this.api,this).pushSelector("config")},e.prototype.files=function(){return new l(this.api,this).pushSelector("files")},e.prototype.file=function(t){return new b(this.api,this,t)},e.prototype.filesZip=function(){return new l(this.api,this).pushSelector("files.zip")},e.prototype.icon=function(){return new h(this.api,this).pushSelector("icon")},e.prototype.sharings=function(){return new l(this.api,this).pushSelector("sharings")},e.prototype.sharing=function(t){return i.throwUnlessId(t,"Project Sharing"),new h(this.api,this).pushSelector("sharings",t)},e.prototype.trends=function(){return new h(this.api,this).pushSelector("trends")},e.prototype.runs=function(){return new l(this.api,this).pushSelector("runs")},e.prototype.run=function(t){return new U(this.api,this,t)},e.prototype.runsExtended=function(){return new l(this.api,this).pushSelector("runs-extended")},e.prototype.runExtended=function(t){return i.throwUnlessId(t,"Project RunExtended"),new h(this.api,this).pushSelector("runs-extended",t)},e.prototype.reports=function(t){return new l(this.api,this,!1).pushSelector("reports",t)},e.prototype.configParameters=function(){return new l(this.api,this).pushSelector("config/parameters")},e.prototype.configParameter=function(t){return i.throwUnlessId(t,"Project ConfigParameter"),new h(this.api,this).pushSelector("config/parameters",t)},e.prototype.unarchive=function(){return new h(this.api,this).pushSelector("unarchive")},e.prototype.frameworks=function(){return new l(this.api,this).pushSelector("frameworks")},e.prototype.availableFrameworks=function(){return new l(this.api,this).pushSelector("available-frameworks")},e}(),x={}.hasOwnProperty,I=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"FileSet"),this.pushSelector("file-sets",r)}return function(t,e){for(var o in e)x.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.files=function(){return new l(this.api,this).pushSelector("files")},e.prototype.file=function(t){return new b(this.api,this,t)},e}(),D={}.hasOwnProperty,R=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"BillingPeriod"),this.pushSelector("billing-periods",r)}return function(t,e){for(var o in e)D.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.receipt=function(){return new h(this.api,this).pushSelector("receipt")},e}(),O=function(t,e){return function(){return t.apply(e,arguments)}},F={}.hasOwnProperty,C=function(t){function e(t,o,r){this.receipt=O(this.receipt,this),e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Purchased"),this.pushSelector("purchased",r)}return function(t,e){for(var o in e)F.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.receipt=function(){return new l(this.api,this).pushSelector("receipt")},e}(),H=function(t,e){return function(){return t.apply(e,arguments)}},L={}.hasOwnProperty,k=function(t){function e(t,o){this.active=H(this.active,this),e.__super__.constructor.call(this,t,o),this.pushSelector("purchased")}return function(t,e){for(var o in e)L.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,l),e.prototype.active=function(){return this.addHook(function(t){var e,o;for(e=0,o=[];e<t.length;)t[e].active?o.push(e++):o.push(t.splice(e,1));return o})},e}(),A={}.hasOwnProperty,q=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("services")}return function(t,e){for(var o in e)A.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,l),e.prototype.purchased=function(t){return null!=t?new C(this.api,this,t):new k(this.api,this)},e.prototype.available=function(){return this.pushSelector("available")},e.prototype.active=function(){return"me"===this[0]?this.pushSelector("active"):this.setConstantParams({sort:"name_a",limit:0,filter:"d_activateTime_before_"+Date.now()+";d_archiveTime_afterornull_"+Date.now()})},e.prototype.activated=function(){return this.setConstantParams({sort:"name_a",limit:0,filter:"d_startTime_before_"+Date.now()+";d_endTime_afterornull_"+Date.now()})},e}(),E={}.hasOwnProperty,G=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Service"),this.pushSelector("services",r)}return function(t,e){for(var o in e)E.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.activate=function(t){var e;return(e=new h(this.api,this)).pushSelector("activate"),e.post(t)},e.prototype.deactivate=function(){var t;return(t=new h(this.api,this)).pushSelector("deactivate"),t.post()},e.prototype.roles=function(){return new l(this.api,this).pushSelector("roles")},e}(),z={}.hasOwnProperty,M=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("account")}return function(t,e){for(var o in e)z.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,l),e.prototype.services=function(){return new q(this.api,this)},e.prototype.service=function(t){return i.throwUnlessId(t,"Account Services"),new h(this.api,this).pushSelector("services",t)},e.prototype.roles=function(){return new l(this.api,this).pushSelector("roles")},e.prototype.role=function(t){return i.throwUnlessId(t,"Account Roles"),new h(this.api,this).pushSelector("roles",t)},e.prototype.additionalUsers=function(){return new l(this.api,this).pushSelector("additional-users")},e.prototype.additionalUser=function(t){return i.throwUnlessId(t,"Account Additional User"),new h(this.api,this).pushSelector("additional-users",t)},e}(),B={}.hasOwnProperty,N=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("notifications")}return function(t,e){for(var o in e)B.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,l),e.prototype.scopes=function(){return new l(this.api,this).pushSelector("scopes")},e.prototype.channels=function(){return new l(this.api,this).pushSelector("channels")},e}(),Z={}.hasOwnProperty,J=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Notification"),this.pushSelector("notifications",r)}return function(t,e){for(var o in e)Z.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.test=function(){return new h(this.api,this).pushSelector("test")},e}(),X={}.hasOwnProperty,Y=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Build"),this.pushSelector("builds",r)}return function(t,e){for(var o in e)X.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.config=function(){return new h(this.api,this).pushSelector("config")},e}(),K={}.hasOwnProperty,W=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Job"),this.pushSelector("jobs",r)}return function(t,e){for(var o in e)K.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.config=function(){return new h(this.api,this).pushSelector("config")},e.prototype.build=function(t){return new Y(this.api,this,t)},e.prototype.builds=function(){return new l(this.api,this).pushSelector("builds")},e}(),Q={}.hasOwnProperty,V=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"User"),"me"===r?this.pushSelector("me"):this.pushSelector("users",r)}return function(t,e){for(var o in e)Q.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.deviceGroups=function(){return new l(this.api,this).pushSelector("device-groups")},e.prototype.deviceGroup=function(t){return new w(this.api,this,t)},e.prototype.deviceSessions=function(){return new l(this.api,this).pushSelector("device-sessions")},e.prototype.deviceUsage=function(){return new l(this.api,this).pushSelector("device-usage")},e.prototype.deviceSession=function(t){return new g(this.api,this,t)},e.prototype.projects=function(){return new l(this.api,this).pushSelector("projects")},e.prototype.project=function(t){return new j(this.api,this,t)},e.prototype.availableProjectTypes=function(){return new l(this.api,this).pushSelector("available-project-types-extended")},e.prototype.filesets=function(){return new l(this.api,this).pushSelector("file-sets")},e.prototype.fileset=function(t){return new I(this.api,this,t)},e.prototype.files=function(){return new l(this.api,this).pushSelector("files")},e.prototype.file=function(t){return new b(this.api,this,t)},e.prototype.billingPeriods=function(){return new l(this.api,this).pushSelector("billing-periods")},e.prototype.billingPeriod=function(t){return new R(this.api,this,t)},e.prototype.runsConfig=function(){var t;return(t=new h(this.api,this)).pushSelector("runs"),t.pushSelector("config")},e.prototype.runs=function(){return new l(this.api,this).pushSelector("runs")},e.prototype.run=function(t){return new U(this,void 0,t)},e.prototype.services=function(){return new q(this.api,this)},e.prototype.service=function(t){return new G(this.api,this,t)},e.prototype.filePath=function(t){var e;return(e=new l(this.api,this)).pushSelector("files",t),e.pushSelector("file")},e.prototype.deviceTime=function(){return new l(this.api,this).pushSelector("device-time")},e.prototype.uiPreferences=function(){return new l(this.api,this).pushSelector("ui-preferences")},e.prototype.account=function(){return new M(this.api,this)},e.prototype.receipts=function(){return new l(this.api,this).pushSelector("receipts")},e.prototype.receipt=function(t){return i.throwUnlessId(t,"User Receipt"),new h(this.api,this).pushSelector("receipts",t)},e.prototype.resetApiKey=function(){return new l(this.api,this).pushSelector("reset-api-key")},e.prototype.integrations=function(){return new l(this.api,this).pushSelector("integrations")},e.prototype.integration=function(t){return new h(this.api,this).pushSelector("integrations",t)},e.prototype.notifications=function(){return new N(this.api,this)},e.prototype.notification=function(t){return new J(this.api,this,t)},e.prototype.statistics=function(){return new l(this.api,this).pushSelector("statistics")},e.prototype.restore=function(){return this.pushSelector("restore"),this._post()},e.prototype.jobs=function(){return new l(this.api,this).pushSelector("jobs")},e.prototype.job=function(t){return new W(this.api,this,t)},e}(),tt={}.hasOwnProperty,et=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("devices")}return function(t,e){for(var o in e)tt.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,l),e.prototype.filters=function(){return new h(this.api,this).pushSelector("filters")},e.prototype.cleanupConfigurations=function(){return new l(this.api,this).pushSelector("cleanup-configurations")},e.prototype.cleanupConfiguration=function(t){return i.throwUnlessId(t,"Devices CleanupConfiguration"),new h(this.api,this).pushSelector("cleanup-configurations",t)},e}(),ot={}.hasOwnProperty,rt=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"Label"),this.pushSelector("labels",r)}return function(t,e){for(var o in e)ot.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.devices=function(){return new l(this.api,this).pushSelector("devices")},e.prototype.device=function(t){return i.throwUnlessId(t,"Label Device"),new h(this.api,this).pushSelector("devices",t)},e}(),nt={}.hasOwnProperty,it=function(t){function e(t,o,r){e.__super__.constructor.call(this,t,o),i.throwUnlessId(r,"LabelGroup"),this.pushSelector("label-groups",r)}return function(t,e){for(var o in e)nt.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.labels=function(){return new l(this.api,this).pushSelector("labels")},e.prototype.label=function(t){return new rt(this.api,this,t)},e}(),st={}.hasOwnProperty,pt=function(t){function e(t,o){e.__super__.constructor.call(this,t,o),this.pushSelector("properties")}return function(t,e){for(var o in e)st.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,l),e.prototype.appBan=function(t){return i.throwUnlessId(t,"Property AppBan"),this.pushSelector("app-bans"),this.setConstantParams({testRunId:t})},e}(),ut={}.hasOwnProperty,ct=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var o in e)ut.call(e,o)&&(t[o]=e[o]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,h),e.prototype.login=function(){return new l(this.api,this).pushSelector("login")},e.prototype.logout=function(){return new l(this.api,this).pushSelector("logout")},e}(),ht=function(){function t(t){this.config={cloudUrl:null,driver:null},this.setup(t)}return t.prototype.setup=function(t){if(i.extend(this.config,t),!(null!=this.config.cloudUrl&&"string"==typeof this.config.cloudUrl&&this.config.cloudUrl.length>1))throw"Invalid cloudUrl";this.config.cloudUrl=this.config.cloudUrl.replace(/\/+$/,"")},t.prototype.getUrl=function(t,e){return i.getUrl.call(this,t,e,this.config.cloudUrl)},t.prototype.request=function(t,e,o,r){var n,s,p,u,c,h,a;if(null==o&&(o={}),null==r&&(r=$.Deferred()),u=i.isJSONString(o.data)?"application/json":"application/x-www-form-urlencoded; charset=UTF-8",n={method:e,data:o.data,dataType:o.dataType,contentType:u,timeout:o.timeout,params:o.params},"undefined"!=typeof FormData&&null!==FormData&&n.data instanceof FormData&&(n.contentType=!1,n.processData=!1),n.dfd=r,n.xhr=this._xhrHandlerFactory(n),n.success=this._successHandlerFactory(t,n),n.error=this._errorHandlerFactory(t,n),"GET"===n.method&&(null!=(c=n.params)?c.cacheTTL:void 0)>0){if(s="GET "+app.ctx.service.ajax.getUrl(t,n)+" "+n.contentType,p=n.params.cacheTTL,Cache.isStored(s))return a=Cache.get(s),isPromise(a)?r=a:r.resolve.apply(this,a),r;Cache.set(s,r,p),function(t,e){r.then(function(){return Cache.set(t,arguments,e)}),r.fail(function(){return Cache.remove(t)})}(s,p)}return h=app.ctx.service.ajax.request(t,n),r.abort=h.abort,r},t.prototype.customRequest=function(t,e,o){var r;return null==e&&(e={}),null==o&&(o=$.Deferred()),null==e.uploadProgress&&(e.uploadProgress=this._progressHandlerFactory(e,o)),null==e.success&&(e.success=(r=this,function(){return o.resolve.apply(r,arguments)})),null==e.error&&(e.error=function(t){return function(){return o.reject.apply(t,arguments)}}(this)),e.xhr=function(t){return function(){var r;return r=new window.XMLHttpRequest,"POST"===e.method?r.upload.addEventListener("progress",t._progressHandlerFactory(e,o)):r.addEventListener("progress",t._progressHandlerFactory(e,o)),r}}(this),app.ctx.service.ajax.request(t,e),o},t.prototype._xhrHandlerFactory=function(t){return e=this,function(){var o;return o=new window.XMLHttpRequest,"POST"===t.method?o.upload.addEventListener("progress",e._progressHandlerFactory(t)):o.addEventListener("progress",e._progressHandlerFactory(t)),o};var e},t.prototype._progressHandlerFactory=function(t){return function(e){return t.dfd.notify({type:"POST"===t.method?"upload":"download",computable:e.lengthComputable,totalBytes:e.total,loadedBytes:e.loaded,loadedPercent:e.lengthComputable?parseFloat(e.loaded/e.total*100):void 0})}},t.prototype._errorHandlerFactory=function(t,e){return o=this,function(r,n){arguments.length>1?401===r.status?app.ctx.service.auth.reAuthorize(function(){return o.request(t,e.method,e,e.dfd)}):404===r.status?e.dfd.reject(r,n):($console.warn(o._getRequestLog(r,e.method,t)),$console.warn("Request settings:",e),e.dfd.reject(r,n)):($console.warn("Trying to re-authorize..."),app.ctx.service.auth.reAuthorize(function(){return o.request(t,e.method,e,e.dfd)}))};var o},t.prototype._successHandlerFactory=function(t,e){return o=this,function(t,r,n){var i;return t instanceof XMLDocument?requirejs(["x2js"],function(n){var i;return null==o._xml2json&&(o._xml2json=new n),i=(i=o._xml2json.xml2json(t))[Object.keys(i)[0]],e.dfd.resolve(i,{status:r,apiHandler:"form"})}):((i={}).status=r,i.apiHandler="json","GET"===e.method&&(i.offset=t.offset,i.limit=t.limit,i.total=t.total,i.search=t.search,i.sort=t.sort,i.size=n.getResponseHeader("Content-Length"),t.data&&null!=t.total&&(t=t.data)),e.dfd.resolve(t,i))};var o},t.prototype._getRequestLog=function(t,e,o){return"HTTP "+e+" status "+t.status+" ("+t.statusText+")\n Resource: "+o+"\nResponse: "+t.responseText},t.prototype.user=function(t){return new V(this,null,t)},t.prototype.me=function(){return new V(this,void 0,"me")},t.prototype.admin=function(){return new Admin(this)},t.prototype.devices=function(){return new et(this)},t.prototype.device=function(t){return new y(this,null,t)},t.prototype.files=function(){return new l(this).pushSelector("files")},t.prototype.file=function(t){return new b(this,null,t)},t.prototype.filesets=function(){return new l(this).pushSelector("file-sets")},t.prototype.fileset=function(t){return new I(this,null,t)},t.prototype.runsConfig=function(){var t;return(t=new h(this)).pushSelector("runs"),t.pushSelector("config")},t.prototype.runs=function(){return new l(this).pushSelector("runs")},t.prototype.run=function(t){return new U(this,null,t)},t.prototype.projects=function(){return new l(this).pushSelector("projects")},t.prototype.project=function(t){return new j(this,null,t)},t.prototype.labelGroups=function(){return new l(this).pushSelector("label-groups")},t.prototype.labelGroup=function(t){return new it(this,null,t)},t.prototype.deviceStatuses=function(){return new l(this).pushSelector("device-status")},t.prototype.deviceStatus=function(t){return i.throwUnlessId(t,"Device Status"),new h(this).pushSelector("device-status",t)},t.prototype.property=function(t){return i.throwUnlessId(t,"Properties"),new h(this,void 0).pushSelector("properties",t)},t.prototype.properties=function(){return new pt(this)},t.prototype.services=function(){return new q(this)},t.prototype.filePath=function(t){var e;return i.throwUnlessId(t,"Files Path"),(e=new l(this)).pushSelector("files",t),e.pushSelector("file")},t.prototype.deviceSessions=function(){return new l(this).pushSelector("device-sessions")},t.prototype.deviceSession=function(t){return new g(this,null,t)},t.prototype.sessions=function(){return new l(this).pushSelector("sessions")},t.prototype.deviceGroups=function(){return new l(this).pushSelector("device-groups")},t.prototype.deviceGroup=function(t){return new w(this,null,t)},t.prototype.userSessions=function(){return new l(this).pushSelector("user-session")},t.prototype.userSession=function(){return new ct(this)},t.prototype.license=function(){var t;return(t=new h(this)).cacheTTL=Date.ms.HOUR,t.pushSelector("license")},t.prototype.sso=function(t){var e;return(e=new h(this)).pushSelector("user-sessions"),e.pushSelector(t+"-login"),e.getAbsoluteResourcePath()},t}();return ht.Utils=i,ht.FilterBuilder=_,ht});
